var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") return Reflect.decorate(decorators, target, key, desc);
    switch (arguments.length) {
        case 2: return decorators.reduceRight(function(o, d) { return (d && d(o)) || o; }, target);
        case 3: return decorators.reduceRight(function(o, d) { return (d && d(target, key)), void 0; }, void 0);
        case 4: return decorators.reduceRight(function(o, d) { return (d && d(target, key, o)) || o; }, desc);
    }
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var angular2_1 = require('angular2/angular2');
var CarouselSlide = (function () {
    function CarouselSlide(el) {
        this._itemClass = true;
        this._el = el.nativeElement;
    }
    CarouselSlide.prototype.getElement = function () {
        return this._el;
    };
    CarouselSlide.prototype.activate = function () { this._activeClass = true; };
    CarouselSlide.prototype.deactivate = function () { this._activeClass = false; };
    CarouselSlide.prototype.prepareAnimation = function (isToRight) {
        isToRight ? this._nextClass = true : this._prevClass = true;
    };
    CarouselSlide.prototype.animate = function (isToRight) {
        isToRight ? this._leftClass = true : this._rightClass = true;
    };
    CarouselSlide.prototype.cleanAfterAnimation = function () {
        this._leftClass = this._rightClass = this._nextClass = this._prevClass = false;
    };
    CarouselSlide = __decorate([
        angular2_1.Directive({
            selector: 'carousel-slide',
            host: {
                '[class.item]': '_itemClass',
                '[class.active]': '_activeClass',
                '[class.left]': '_leftClass',
                '[class.right]': '_rightClass',
                '[class.prev]': '_prevClass',
                '[class.next]': '_nextClass',
                'role': 'listbox'
            }
        }), 
        __metadata('design:paramtypes', [angular2_1.ElementRef])
    ], CarouselSlide);
    return CarouselSlide;
})();
exports.CarouselSlide = CarouselSlide;
var CarouselCaption = (function () {
    function CarouselCaption() {
        this.carouselCaptionClass = true;
    }
    CarouselCaption = __decorate([
        angular2_1.Directive({
            selector: 'carousel-caption',
            host: {
                '[class.carousel-caption]': 'carouselCaptionClass'
            }
        }), 
        __metadata('design:paramtypes', [])
    ], CarouselCaption);
    return CarouselCaption;
})();
exports.CarouselCaption = CarouselCaption;
var Carousel = (function () {
    function Carousel(query, el) {
        var _this = this;
        this.pause = "hover";
        this.indexchange = new angular2_1.EventEmitter();
        this.slidestart = new angular2_1.EventEmitter();
        this.slideend = new angular2_1.EventEmitter();
        this._activeIndex = -1;
        this._interval = 5000;
        this._isChangingSlide = false;
        this._isToRight = true;
        this._noTransition = false;
        this._slides = [];
        this._timerId = null;
        this._transitionEnd = getTransitionEnd();
        this._wrap = true;
        this._el = el;
        this._startCycling();
        query.onChange(function () {
            _this._registerSlides(query);
        });
    }
    Carousel.prototype._registerSlides = function (query) {
        var activeSlide = this._slides[this._activeIndex];
        this._slides = [];
        var activationDone = false;
        for (var i = 0; i < query.length; i++) {
            var slide = query._results[i];
            slide.deactivate();
            slide.cleanAfterAnimation();
            if (slide === activeSlide || (typeof activeSlide === "undefined" && this._activeIndex == this._slides.length)) {
                slide.activate();
                if (this._activeIndex !== this._slides.length) {
                    if (typeof this._activeIndex != "string") {
                        this.indexchange.next(this._slides.length);
                    }
                    this._activeIndex = this._slides.length;
                }
                activationDone = true;
            }
            this._slides.push(slide);
        }
        if (!activationDone) {
            this._slides[0].activate();
            this._activeIndex = 0;
            this.indexchange.next(this._activeIndex);
        }
        this._isChangingSlide = false;
        this._isToRight = null;
    };
    Object.defineProperty(Carousel.prototype, "wrap", {
        set: function (newValue) {
            this._wrap = typeof newValue === "string" ? newValue != "false" : newValue;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Carousel.prototype, "noTransition", {
        set: function (newValue) {
            this._noTransition = typeof newValue === "string" ? newValue != "false" : newValue;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Carousel.prototype, "interval", {
        set: function (newValue) {
            this._interval = typeof newValue === "string" ? parseInt(newValue) : newValue;
            this._stopCycling();
            this._startCycling();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Carousel.prototype, "index", {
        set: function (newValue) {
            var _this = this;
            if (!this._isChangingSlide && newValue != this._activeIndex && newValue >= 0 && newValue <= this._slides.length - 1) {
                this._isChangingSlide = true;
                if (this._isToRight == null) {
                    this._isToRight = newValue > this._activeIndex;
                }
                this.slidestart.next(null);
                var currentSlide = this._slides[this._activeIndex];
                var nextSlide = this._slides[newValue];
                if (!this._noTransition && this._transitionEnd && currentSlide) {
                    nextSlide.prepareAnimation(this._isToRight);
                    setTimeout(function () {
                        currentSlide.animate(_this._isToRight);
                        nextSlide.animate(_this._isToRight);
                        var endAnimationCallback = function (event) {
                            currentSlide.getElement().removeEventListener(_this._transitionEnd, endAnimationCallback, false);
                            _this._finalizeTransition(currentSlide, nextSlide, newValue);
                        };
                        currentSlide.getElement().addEventListener(_this._transitionEnd, endAnimationCallback, false);
                    }, 30);
                }
                else {
                    this._finalizeTransition(currentSlide, nextSlide, newValue);
                }
            }
            else if (this._activeIndex == -1) {
                this._finalizeTransition(null, null, newValue);
                this._el.parentView._view.changeDetector.detectChanges();
            }
        },
        enumerable: true,
        configurable: true
    });
    Carousel.prototype._finalizeTransition = function (currentSlide, nextSlide, newValue) {
        if (currentSlide) {
            currentSlide.deactivate();
            currentSlide.cleanAfterAnimation();
        }
        if (nextSlide) {
            nextSlide.activate();
            nextSlide.cleanAfterAnimation();
        }
        this._activeIndex = newValue;
        this._isChangingSlide = false;
        this._isToRight = null;
        if (currentSlide || nextSlide) {
            this.slideend.next(null);
            this.indexchange.next(this._activeIndex);
        }
    };
    Carousel.prototype.navigateTo = function (newIndex) {
        this.index = newIndex;
    };
    Carousel.prototype.prev = function () {
        if (this.hasPrev()) {
            var prevIndex = this._activeIndex - 1 < 0 ? this._slides.length - 1 : this._activeIndex - 1;
            this._isToRight = false;
            this.index = prevIndex;
        }
    };
    Carousel.prototype.next = function () {
        if (this.hasNext()) {
            var nextIndex = (this._activeIndex + 1) % this._slides.length;
            this._isToRight = true;
            this.index = nextIndex;
        }
    };
    Carousel.prototype.hasPrev = function () {
        return this._slides.length > 1 && !(!this._wrap && this._activeIndex === 0);
    };
    Carousel.prototype.hasNext = function () {
        return this._slides.length > 1 && !(!this._wrap && this._activeIndex === (this._slides.length - 1));
    };
    Carousel.prototype.toggleAutomaticSliding = function () {
        if (this.pause === "hover") {
            if (this._timerId) {
                this._stopCycling();
            }
            else {
                this._startCycling();
            }
        }
    };
    Carousel.prototype._startCycling = function () {
        var _this = this;
        if (this._interval >= 0) {
            this._timerId = setInterval(function () {
                _this.next();
            }, this._interval > 600 ? this._interval : 600);
        }
    };
    Carousel.prototype._stopCycling = function () {
        if (this._timerId) {
            clearInterval(this._timerId);
        }
        this._timerId = null;
    };
    Carousel = __decorate([
        angular2_1.Component({
            selector: 'carousel',
            properties: [
                'index',
                'wrap',
                'interval',
                'pause',
                'noTransition: no-transition'
            ],
            host: {
                '(mouseenter)': 'toggleAutomaticSliding()',
                '(mouseleave)': 'toggleAutomaticSliding()'
            },
            events: ['indexchange', 'slidestart', 'slideend']
        }),
        angular2_1.View({
            templateUrl: './ng2-bootstrap/carousel/carousel.html',
            directives: [angular2_1.NgFor, angular2_1.NgIf]
        }),
        __param(0, angular2_1.Query(CarouselSlide)), 
        __metadata('design:paramtypes', [angular2_1.QueryList, angular2_1.ElementRef])
    ], Carousel);
    return Carousel;
})();
exports.Carousel = Carousel;
function getTransitionEnd() {
    var el = document.createElement('angular2-bootstrap');
    var transEndEventNames = {
        WebkitTransition: 'webkitTransitionEnd',
        MozTransition: 'transitionend',
        OTransition: 'oTransitionEnd otransitionend',
        transition: 'transitionend'
    };
    for (var name in transEndEventNames) {
        if (el.style[name] !== undefined) {
            return transEndEventNames[name];
        }
    }
    return null;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5nMi1ib290c3RyYXAvY2Fyb3VzZWwvY2Fyb3VzZWwudHMiXSwibmFtZXMiOlsiQ2Fyb3VzZWxTbGlkZSIsIkNhcm91c2VsU2xpZGUuY29uc3RydWN0b3IiLCJDYXJvdXNlbFNsaWRlLmdldEVsZW1lbnQiLCJDYXJvdXNlbFNsaWRlLmFjdGl2YXRlIiwiQ2Fyb3VzZWxTbGlkZS5kZWFjdGl2YXRlIiwiQ2Fyb3VzZWxTbGlkZS5wcmVwYXJlQW5pbWF0aW9uIiwiQ2Fyb3VzZWxTbGlkZS5hbmltYXRlIiwiQ2Fyb3VzZWxTbGlkZS5jbGVhbkFmdGVyQW5pbWF0aW9uIiwiQ2Fyb3VzZWxDYXB0aW9uIiwiQ2Fyb3VzZWxDYXB0aW9uLmNvbnN0cnVjdG9yIiwiQ2Fyb3VzZWwiLCJDYXJvdXNlbC5jb25zdHJ1Y3RvciIsIkNhcm91c2VsLl9yZWdpc3RlclNsaWRlcyIsIkNhcm91c2VsLndyYXAiLCJDYXJvdXNlbC5ub1RyYW5zaXRpb24iLCJDYXJvdXNlbC5pbnRlcnZhbCIsIkNhcm91c2VsLmluZGV4IiwiQ2Fyb3VzZWwuX2ZpbmFsaXplVHJhbnNpdGlvbiIsIkNhcm91c2VsLm5hdmlnYXRlVG8iLCJDYXJvdXNlbC5wcmV2IiwiQ2Fyb3VzZWwubmV4dCIsIkNhcm91c2VsLmhhc1ByZXYiLCJDYXJvdXNlbC5oYXNOZXh0IiwiQ2Fyb3VzZWwudG9nZ2xlQXV0b21hdGljU2xpZGluZyIsIkNhcm91c2VsLl9zdGFydEN5Y2xpbmciLCJDYXJvdXNlbC5fc3RvcEN5Y2xpbmciLCJnZXRUcmFuc2l0aW9uRW5kIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFBLHlCQUFrRyxtQkFBbUIsQ0FBQyxDQUFBO0FBRXRIO0lBcUJFQSx1QkFBWUEsRUFBY0E7UUFQbEJDLGVBQVVBLEdBQVlBLElBQUlBLENBQUNBO1FBUWpDQSxJQUFJQSxDQUFDQSxHQUFHQSxHQUFHQSxFQUFFQSxDQUFDQSxhQUFhQSxDQUFDQTtJQUM5QkEsQ0FBQ0E7SUFDREQsa0NBQVVBLEdBQVZBO1FB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TUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsT0FBT0EsQ0FBQ0EsTUFBTUEsR0FBR0EsQ0FBQ0EsSUFBS0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsS0FBS0EsSUFBSUEsSUFBSUEsQ0FBQ0EsWUFBWUEsS0FBS0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7SUFDL0VBLENBQUNBO0lBQ0RYLDBCQUFPQSxHQUFQQTtRQUNFWSxNQUFNQSxDQUFDQSxJQUFJQSxDQUFDQSxPQUFPQSxDQUFDQSxNQUFNQSxHQUFHQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxLQUFLQSxJQUFJQSxJQUFJQSxDQUFDQSxZQUFZQSxLQUFLQSxDQUFDQSxJQUFJQSxDQUFDQSxPQUFPQSxDQUFDQSxNQUFNQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtJQUN0R0EsQ0FBQ0E7SUFDRFoseUNBQXNCQSxHQUF0QkE7UUFDRWEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsS0FBS0EsS0FBS0EsT0FBT0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDM0JBLEVBQUVBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLFFBQVFBLENBQUNBLENBQUNBLENBQUNBO2dCQUNsQkEsSUFBSUEsQ0FBQ0EsWUFBWUEsRUFBRUEsQ0FBQ0E7WUFDdEJBLENBQUNBO1lBQUNBLElBQUlBLENBQUNBLENBQUNBO2dCQUNOQSxJQUFJQSxDQUFDQSxhQUFhQSxFQUFFQSxDQUFDQTtZQUN2QkEsQ0FBQ0E7UUFDSEEsQ0FBQ0E7SUFDSEEsQ0FBQ0E7SUFFT2IsZ0NBQWFBLEdBQXJCQTtRQUFBYyxpQkFNQ0E7UUFMQ0EsRUFBRUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsU0FBU0EsSUFBSUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDeEJBLElBQUlBLENBQUNBLFFBQVFBLEdBQUdBLFdBQVdBLENBQUNBO2dCQUMxQkEsS0FBSUEsQ0FBQ0EsSUFBSUEsRUFBRUEsQ0FBQ0E7WUFDZEEsQ0FBQ0EsRUFBRUEsSUFBSUEsQ0FBQ0EsU0FBU0EsR0FBR0EsR0FBR0EsR0FBR0EsSUFBSUEsQ0FBQ0EsU0FBU0EsR0FBRUEsR0FBR0EsQ0FBQ0EsQ0FBQ0E7UUFDakRBLENBQUNBO0lBQ0hBLENBQUNBO0lBQ09kLCtCQUFZQSxHQUFwQkE7UUFDRWUsRUFBRUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsUUFBUUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDbEJBLGFBQWFBLENBQUNBLElBQUlBLENBQUNBLFFBQVFBLENBQUNBLENBQUNBO1FBQy9CQSxDQUFDQTtRQUNEQSxJQUFJQSxDQUFDQSxRQUFRQSxHQUFHQSxJQUFJQSxDQUFDQTtJQUN2QkEsQ0FBQ0E7SUF2TEhmO1FBQUNBLG9CQUFTQSxDQUFDQTtZQUNUQSxRQUFRQSxFQUFFQSxVQUFVQTtZQUNwQkEsVUFBVUEsRUFBR0E7Z0JBQ1hBLE9BQU9BO2dCQUNQQSxNQUFNQTtnQkFDTkEsVUFBVUE7Z0JBQ1ZBLE9BQU9BO2dCQUNQQSw2QkFBNkJBO2FBQzlCQTtZQUNEQSxJQUFJQSxFQUFFQTtnQkFDSkEsY0FBY0EsRUFBRUEsMEJBQTBCQTtnQkFDMUNBLGNBQWNBLEVBQUVBLDBCQUEwQkE7YUFDM0NBO1lBQ0RBLE1BQU1BLEVBQUVBLENBQUNBLGFBQWFBLEVBQUVBLFlBQVlBLEVBQUVBLFVBQVVBLENBQUNBO1NBQ2xEQSxDQUFDQTtRQUNEQSxlQUFJQSxDQUFDQTtZQUNKQSxXQUFXQSxFQUFFQSx3Q0FBd0NBO1lBQ3JEQSxVQUFVQSxFQUFFQSxDQUFDQSxnQkFBS0EsRUFBRUEsZUFBSUEsQ0FBQ0E7U0FDMUJBLENBQUNBO1FBcUJZQSxXQUFDQSxnQkFBS0EsQ0FBQ0EsYUFBYUEsQ0FBQ0EsQ0FBQUE7O2lCQWlKbENBO0lBQURBLGVBQUNBO0FBQURBLENBeExBLEFBd0xDQSxJQUFBO0FBcktZLGdCQUFRLFdBcUtwQixDQUFBO0FBSUQ7SUFDSWdCLElBQUlBLEVBQUVBLEdBQUdBLFFBQVFBLENBQUNBLGFBQWFBLENBQUNBLG9CQUFvQkEsQ0FBQ0EsQ0FBQ0E7SUFDdERBLElBQUlBLGtCQUFrQkEsR0FBR0E7UUFDckJBLGdCQUFnQkEsRUFBR0EscUJBQXFCQTtRQUN4Q0EsYUFBYUEsRUFBTUEsZUFBZUE7UUFDbENBLFdBQVdBLEVBQVFBLCtCQUErQkE7UUFDbERBLFVBQVVBLEVBQVNBLGVBQWVBO0tBQ3JDQSxDQUFDQTtJQUNGQSxHQUFHQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxJQUFJQSxJQUFJQSxrQkFBa0JBLENBQUNBLENBQUNBLENBQUNBO1FBQ2xDQSxFQUFFQSxDQUFDQSxDQUFDQSxFQUFFQSxDQUFDQSxLQUFLQSxDQUFDQSxJQUFJQSxDQUFDQSxLQUFLQSxTQUFTQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUMvQkEsTUFBTUEsQ0FBQ0Esa0JBQWtCQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQTtRQUNwQ0EsQ0FBQ0E7SUFDTEEsQ0FBQ0E7SUFDREEsTUFBTUEsQ0FBQ0EsSUFBSUEsQ0FBQ0E7QUFDaEJBLENBQUNBIiwiZmlsZSI6Im5nMi1ib290c3RyYXAvY2Fyb3VzZWwvY2Fyb3VzZWwuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0NvbXBvbmVudCwgVmlldywgRGlyZWN0aXZlLCBFbGVtZW50UmVmLCBRdWVyeSwgUXVlcnlMaXN0LCBOZ0ZvciwgTmdJZiwgRXZlbnRFbWl0dGVyfSBmcm9tICdhbmd1bGFyMi9hbmd1bGFyMic7XHJcblxyXG5ARGlyZWN0aXZlKHtcclxuICBzZWxlY3RvcjogJ2Nhcm91c2VsLXNsaWRlJyxcclxuICBob3N0OiB7XHJcbiAgICAnW2NsYXNzLml0ZW1dJzogJ19pdGVtQ2xhc3MnLFxyXG4gICAgJ1tjbGFzcy5hY3RpdmVdJzogJ19hY3RpdmVDbGFzcycsXHJcbiAgICAnW2NsYXNzLmxlZnRdJzogJ19sZWZ0Q2xhc3MnLFxyXG4gICAgJ1tjbGFzcy5yaWdodF0nOiAnX3JpZ2h0Q2xhc3MnLFxyXG4gICAgJ1tjbGFzcy5wcmV2XSc6ICdfcHJldkNsYXNzJyxcclxuICAgICdbY2xhc3MubmV4dF0nOiAnX25leHRDbGFzcycsXHJcbiAgICAncm9sZSc6ICdsaXN0Ym94J1xyXG4gIH1cclxufSlcclxuZXhwb3J0IGNsYXNzIENhcm91c2VsU2xpZGUge1xyXG4gIHByaXZhdGUgX2VsOiBIVE1MRWxlbWVudDtcclxuICBwcml2YXRlIF9pdGVtQ2xhc3M6IGJvb2xlYW4gPSB0cnVlO1xyXG4gIHByaXZhdGUgX2FjdGl2ZUNsYXNzOiBib29sZWFuO1xyXG4gIHByaXZhdGUgX2xlZnRDbGFzczogYm9vbGVhbjtcclxuICBwcml2YXRlIF9yaWdodENsYXNzOiBib29sZWFuO1xyXG4gIHByaXZhdGUgX3ByZXZDbGFzczogYm9vbGVhbjtcclxuICBwcml2YXRlIF9uZXh0Q2xhc3M6IGJvb2xlYW47XHJcbiAgXHJcbiAgY29uc3RydWN0b3IoZWw6IEVsZW1lbnRSZWYpIHtcclxuICAgIHRoaXMuX2VsID0gZWwubmF0aXZlRWxlbWVudDtcclxuICB9XHJcbiAgZ2V0RWxlbWVudCgpOiBIVE1MRWxlbWVudCB7XHJcbiAgICByZXR1cm4gdGhpcy5fZWw7XHJcbiAgfVxyXG4gIGFjdGl2YXRlKCk6IHZvaWQge3RoaXMuX2FjdGl2ZUNsYXNzID0gdHJ1ZTt9XHJcbiAgZGVhY3RpdmF0ZSgpOiB2b2lkIHt0aGlzLl9hY3RpdmVDbGFzcyA9IGZhbHNlO31cclxuICBwcmVwYXJlQW5pbWF0aW9uKGlzVG9SaWdodDogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgaXNUb1JpZ2h0ID8gdGhpcy5fbmV4dENsYXNzID0gdHJ1ZSA6IHRoaXMuX3ByZXZDbGFzcyA9IHRydWU7XHJcbiAgfVxyXG4gIGFuaW1hdGUoaXNUb1JpZ2h0OiBib29sZWFuKTogdm9pZCB7XHJcbiAgICBpc1RvUmlnaHQgPyB0aGlzLl9sZWZ0Q2xhc3MgPSB0cnVlIDogdGhpcy5fcmlnaHRDbGFzcyA9IHRydWU7XHJcbiAgfVxyXG4gIGNsZWFuQWZ0ZXJBbmltYXRpb24oKTogdm9pZCB7XHJcbiAgICB0aGlzLl9sZWZ0Q2xhc3MgPSB0aGlzLl9yaWdodENsYXNzID0gdGhpcy5fbmV4dENsYXNzID0gdGhpcy5fcHJldkNsYXNzID0gZmFsc2U7XHJcbiAgfVxyXG59XHJcblxyXG5ARGlyZWN0aXZlKHtcclxuICBzZWxlY3RvcjogJ2Nhcm91c2VsLWNhcHRpb24nLFxyXG4gIGhvc3Q6IHtcclxuICAgICdbY2xhc3MuY2Fyb3VzZWwtY2FwdGlvbl0nOiAnY2Fyb3VzZWxDYXB0aW9uQ2xhc3MnXHJcbiAgfVxyXG59KVxyXG5leHBvcnQgY2xhc3MgQ2Fyb3VzZWxDYXB0aW9uIHtcclxuICBwcml2YXRlIGNhcm91c2VsQ2FwdGlvbkNsYXNzOiBib29sZWFuID0gdHJ1ZTtcclxufVxyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICdjYXJvdXNlbCcsXHJcbiAgcHJvcGVydGllcyA6IFtcclxuICAgICdpbmRleCcsXHJcbiAgICAnd3JhcCcsXHJcbiAgICAnaW50ZXJ2YWwnLFxyXG4gICAgJ3BhdXNlJyxcclxuICAgICdub1RyYW5zaXRpb246IG5vLXRyYW5zaXRpb24nXHJcbiAgXSxcclxuICBob3N0OiB7XHJcbiAgICAnKG1vdXNlZW50ZXIpJzogJ3RvZ2dsZUF1dG9tYXRpY1NsaWRpbmcoKScsXHJcbiAgICAnKG1vdXNlbGVhdmUpJzogJ3RvZ2dsZUF1dG9tYXRpY1NsaWRpbmcoKSdcclxuICB9LFxyXG4gIGV2ZW50czogWydpbmRleGNoYW5nZScsICdzbGlkZXN0YXJ0JywgJ3NsaWRlZW5kJ11cclxufSlcclxuQFZpZXcoe1xyXG4gIHRlbXBsYXRlVXJsOiAnLi9uZzItYm9vdHN0cmFwL2Nhcm91c2VsL2Nhcm91c2VsLmh0bWwnLFxyXG4gIGRpcmVjdGl2ZXM6IFtOZ0ZvciwgTmdJZl1cclxufSlcclxuZXhwb3J0IGNsYXNzIENhcm91c2VsIHtcclxuICBcclxuICBwYXVzZTogc3RyaW5nID0gXCJob3ZlclwiO1xyXG4gIFxyXG4gIHByaXZhdGUgaW5kZXhjaGFuZ2U6IEV2ZW50RW1pdHRlciA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICBwcml2YXRlIHNsaWRlc3RhcnQ6IEV2ZW50RW1pdHRlciA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICBwcml2YXRlIHNsaWRlZW5kOiBFdmVudEVtaXR0ZXIgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgXHJcbiAgcHJpdmF0ZSBfZWw6IEVsZW1lbnRSZWY7XHJcbiAgcHJpdmF0ZSBfYWN0aXZlSW5kZXg6IG51bWJlciA9IC0xO1xyXG4gIHByaXZhdGUgX2ludGVydmFsOiBudW1iZXIgPSA1MDAwO1xyXG4gIHByaXZhdGUgX2lzQ2hhbmdpbmdTbGlkZTogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIHByaXZhdGUgX2lzVG9SaWdodDogYm9vbGVhbiA9IHRydWU7XHJcbiAgcHJpdmF0ZSBfbm9UcmFuc2l0aW9uOiBib29sZWFuID0gZmFsc2U7XHJcbiAgcHJpdmF0ZSBfcXVlcnk6IFF1ZXJ5TGlzdDxDYXJvdXNlbFNsaWRlPjtcclxuICBwcml2YXRlIF9zbGlkZXM6IEFycmF5PENhcm91c2VsU2xpZGU+ID0gW107XHJcbiAgcHJpdmF0ZSBfdGltZXJJZDogbnVtYmVyID0gbnVsbDtcclxuICBwcml2YXRlIF90cmFuc2l0aW9uRW5kOiBzdHJpbmcgPSBnZXRUcmFuc2l0aW9uRW5kKCk7XHJcbiAgcHJpdmF0ZSAgX3dyYXA6IGJvb2xlYW4gPSB0cnVlO1xyXG5cclxuICBjb25zdHJ1Y3RvcihAUXVlcnkoQ2Fyb3VzZWxTbGlkZSkgcXVlcnk6IFF1ZXJ5TGlzdDxDYXJvdXNlbFNsaWRlPiwgZWw6IEVsZW1lbnRSZWYpIHtcclxuICAgIHRoaXMuX2VsID0gZWw7XHJcbiAgICB0aGlzLl9zdGFydEN5Y2xpbmcoKTtcclxuICAgIHF1ZXJ5Lm9uQ2hhbmdlKCgpID0+IHtcclxuICAgICAgdGhpcy5fcmVnaXN0ZXJTbGlkZXMocXVlcnkpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIFxyXG4gIHByaXZhdGUgX3JlZ2lzdGVyU2xpZGVzKHF1ZXJ5OiBRdWVyeUxpc3Q8Q2Fyb3VzZWxTbGlkZT4pOiB2b2lkIHtcclxuICAgIHZhciBhY3RpdmVTbGlkZSA9IHRoaXMuX3NsaWRlc1t0aGlzLl9hY3RpdmVJbmRleF07XHJcbiAgICB0aGlzLl9zbGlkZXMgPSBbXTtcclxuICAgIHZhciBhY3RpdmF0aW9uRG9uZSA9IGZhbHNlO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBxdWVyeS5sZW5ndGg7IGkrKykge1xyXG4gICAgICB2YXIgc2xpZGUgPSBxdWVyeS5fcmVzdWx0c1tpXTtcclxuICAgICAgc2xpZGUuZGVhY3RpdmF0ZSgpO1xyXG4gICAgICBzbGlkZS5jbGVhbkFmdGVyQW5pbWF0aW9uKCk7XHJcbiAgICAgIGlmIChzbGlkZSA9PT0gYWN0aXZlU2xpZGUgfHwgKHR5cGVvZiBhY3RpdmVTbGlkZSA9PT0gXCJ1bmRlZmluZWRcIiAmJiB0aGlzLl9hY3RpdmVJbmRleCA9PSB0aGlzLl9zbGlkZXMubGVuZ3RoKSkge1xyXG4gICAgICAgIHNsaWRlLmFjdGl2YXRlKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuX2FjdGl2ZUluZGV4ICE9PSB0aGlzLl9zbGlkZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuX2FjdGl2ZUluZGV4ICE9IFwic3RyaW5nXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5pbmRleGNoYW5nZS5uZXh0KHRoaXMuX3NsaWRlcy5sZW5ndGgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdGhpcy5fYWN0aXZlSW5kZXggPSB0aGlzLl9zbGlkZXMubGVuZ3RoO1xyXG4gICAgICAgIH1cclxuICAgICAgICBhY3RpdmF0aW9uRG9uZSA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5fc2xpZGVzLnB1c2goc2xpZGUpO1xyXG4gICAgfVxyXG4gICAgaWYgKCFhY3RpdmF0aW9uRG9uZSkge1xyXG4gICAgICB0aGlzLl9zbGlkZXNbMF0uYWN0aXZhdGUoKTtcclxuICAgICAgdGhpcy5fYWN0aXZlSW5kZXggPSAwO1xyXG4gICAgICB0aGlzLmluZGV4Y2hhbmdlLm5leHQodGhpcy5fYWN0aXZlSW5kZXgpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5faXNDaGFuZ2luZ1NsaWRlID0gZmFsc2U7XHJcbiAgICB0aGlzLl9pc1RvUmlnaHQgPSBudWxsO1xyXG4gIH1cclxuICBcclxuICBzZXQgd3JhcCAobmV3VmFsdWU6IGJvb2xlYW4gfCBzdHJpbmcpIHtcclxuICAgIHRoaXMuX3dyYXAgPSB0eXBlb2YgbmV3VmFsdWUgPT09IFwic3RyaW5nXCIgPyBuZXdWYWx1ZSAhPSBcImZhbHNlXCIgOiBuZXdWYWx1ZTtcclxuICB9XHJcbiAgc2V0IG5vVHJhbnNpdGlvbiAobmV3VmFsdWU6IGJvb2xlYW4gfCBzdHJpbmcpIHtcclxuICAgIHRoaXMuX25vVHJhbnNpdGlvbiA9IHR5cGVvZiBuZXdWYWx1ZSA9PT0gXCJzdHJpbmdcIiA/IG5ld1ZhbHVlICE9IFwiZmFsc2VcIiA6IG5ld1ZhbHVlO1xyXG4gIH1cclxuICBzZXQgaW50ZXJ2YWwobmV3VmFsdWU6IG51bWJlciB8IHN0cmluZykge1xyXG4gICAgdGhpcy5faW50ZXJ2YWwgPSB0eXBlb2YgbmV3VmFsdWUgPT09IFwic3RyaW5nXCIgPyBwYXJzZUludChuZXdWYWx1ZSkgOiBuZXdWYWx1ZTtcclxuICAgIHRoaXMuX3N0b3BDeWNsaW5nKCk7XHJcbiAgICB0aGlzLl9zdGFydEN5Y2xpbmcoKTtcclxuICB9XHJcbiAgc2V0IGluZGV4KG5ld1ZhbHVlOiBudW1iZXIpIHtcclxuICAgIC8vTmF2aWdhdGlvbiBhIG5ldyBpbmRleFxyXG4gICAgaWYgKCF0aGlzLl9pc0NoYW5naW5nU2xpZGUgJiYgbmV3VmFsdWUgIT0gdGhpcy5fYWN0aXZlSW5kZXggJiYgbmV3VmFsdWUgPj0gMCAmJiBuZXdWYWx1ZSA8PSB0aGlzLl9zbGlkZXMubGVuZ3RoIC0gMSkge1xyXG4gICAgICB0aGlzLl9pc0NoYW5naW5nU2xpZGUgPSB0cnVlO1xyXG4gICAgICBpZiAodGhpcy5faXNUb1JpZ2h0ID09IG51bGwpIHtcclxuICAgICAgICB0aGlzLl9pc1RvUmlnaHQgPSBuZXdWYWx1ZSA+IHRoaXMuX2FjdGl2ZUluZGV4O1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuc2xpZGVzdGFydC5uZXh0KG51bGwpO1xyXG4gICAgICB2YXIgY3VycmVudFNsaWRlID0gdGhpcy5fc2xpZGVzW3RoaXMuX2FjdGl2ZUluZGV4XTtcclxuICAgICAgdmFyIG5leHRTbGlkZSA9IHRoaXMuX3NsaWRlc1tuZXdWYWx1ZV07XHJcbiAgICAgIGlmICghdGhpcy5fbm9UcmFuc2l0aW9uICYmIHRoaXMuX3RyYW5zaXRpb25FbmQgJiYgY3VycmVudFNsaWRlKSB7XHJcbiAgICAgICAgbmV4dFNsaWRlLnByZXBhcmVBbmltYXRpb24odGhpcy5faXNUb1JpZ2h0KTtcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgIGN1cnJlbnRTbGlkZS5hbmltYXRlKHRoaXMuX2lzVG9SaWdodCk7XHJcbiAgICAgICAgICBuZXh0U2xpZGUuYW5pbWF0ZSh0aGlzLl9pc1RvUmlnaHQpO1xyXG4gICAgICAgICAgdmFyIGVuZEFuaW1hdGlvbkNhbGxiYWNrID0gKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGN1cnJlbnRTbGlkZS5nZXRFbGVtZW50KCkucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLl90cmFuc2l0aW9uRW5kLCBlbmRBbmltYXRpb25DYWxsYmFjaywgZmFsc2UpO1xyXG4gICAgICAgICAgICB0aGlzLl9maW5hbGl6ZVRyYW5zaXRpb24oY3VycmVudFNsaWRlLCBuZXh0U2xpZGUsIG5ld1ZhbHVlKTtcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgICBjdXJyZW50U2xpZGUuZ2V0RWxlbWVudCgpLmFkZEV2ZW50TGlzdGVuZXIodGhpcy5fdHJhbnNpdGlvbkVuZCwgZW5kQW5pbWF0aW9uQ2FsbGJhY2ssIGZhbHNlKTtcclxuICAgICAgICB9LCAzMCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5fZmluYWxpemVUcmFuc2l0aW9uKGN1cnJlbnRTbGlkZSwgbmV4dFNsaWRlLCBuZXdWYWx1ZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIC8vSW5pdGlhbCB2YWx1ZVxyXG4gICAgZWxzZSBpZiAodGhpcy5fYWN0aXZlSW5kZXggPT0gLTEpIHtcclxuICAgICAgdGhpcy5fZmluYWxpemVUcmFuc2l0aW9uKG51bGwsIG51bGwsIG5ld1ZhbHVlKTtcclxuICAgICAgLy9Gb3JjZSBjaGFuZ2UgZGV0ZWN0aW9uXHJcbiAgICAgIHRoaXMuX2VsLnBhcmVudFZpZXcuX3ZpZXcuY2hhbmdlRGV0ZWN0b3IuZGV0ZWN0Q2hhbmdlcygpXHJcbiAgICB9XHJcbiAgfVxyXG4gIHByaXZhdGUgX2ZpbmFsaXplVHJhbnNpdGlvbihjdXJyZW50U2xpZGU6IENhcm91c2VsU2xpZGUsIG5leHRTbGlkZTogQ2Fyb3VzZWxTbGlkZSwgbmV3VmFsdWU6IG51bWJlcik6IHZvaWQge1xyXG4gICAgaWYgKGN1cnJlbnRTbGlkZSkge1xyXG4gICAgICBjdXJyZW50U2xpZGUuZGVhY3RpdmF0ZSgpO1xyXG4gICAgICBjdXJyZW50U2xpZGUuY2xlYW5BZnRlckFuaW1hdGlvbigpO1xyXG4gICAgfVxyXG4gICAgaWYgKG5leHRTbGlkZSkge1xyXG4gICAgICBuZXh0U2xpZGUuYWN0aXZhdGUoKTtcclxuICAgICAgbmV4dFNsaWRlLmNsZWFuQWZ0ZXJBbmltYXRpb24oKTtcclxuICAgIH1cclxuICAgIHRoaXMuX2FjdGl2ZUluZGV4ID0gbmV3VmFsdWU7XHJcbiAgICB0aGlzLl9pc0NoYW5naW5nU2xpZGUgPSBmYWxzZTtcclxuICAgIHRoaXMuX2lzVG9SaWdodCA9IG51bGw7XHJcbiAgICBpZiAoY3VycmVudFNsaWRlIHx8IG5leHRTbGlkZSkge1xyXG4gICAgICB0aGlzLnNsaWRlZW5kLm5leHQobnVsbCk7XHJcbiAgICAgIHRoaXMuaW5kZXhjaGFuZ2UubmV4dCh0aGlzLl9hY3RpdmVJbmRleCk7XHJcbiAgICB9XHJcbiAgICBcclxuICB9XHJcbiAgXHJcbiAgbmF2aWdhdGVUbyhuZXdJbmRleDogbnVtYmVyKTogdm9pZCB7XHJcbiAgICB0aGlzLmluZGV4ID0gbmV3SW5kZXg7XHJcbiAgfVxyXG4gIHByZXYoKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5oYXNQcmV2KCkpIHtcclxuICAgICAgdmFyIHByZXZJbmRleCA9IHRoaXMuX2FjdGl2ZUluZGV4IC0gMSA8IDAgPyB0aGlzLl9zbGlkZXMubGVuZ3RoIC0gMSA6IHRoaXMuX2FjdGl2ZUluZGV4IC0gMTtcclxuICAgICAgdGhpcy5faXNUb1JpZ2h0ID0gZmFsc2U7XHJcbiAgICAgIHRoaXMuaW5kZXggPSBwcmV2SW5kZXg7XHJcbiAgICB9XHJcbiAgfVxyXG4gIG5leHQoKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5oYXNOZXh0KCkpIHtcclxuICAgICAgdmFyIG5leHRJbmRleCA9ICh0aGlzLl9hY3RpdmVJbmRleCArIDEpICUgdGhpcy5fc2xpZGVzLmxlbmd0aDtcclxuICAgICAgdGhpcy5faXNUb1JpZ2h0ID0gdHJ1ZTtcclxuICAgICAgdGhpcy5pbmRleCA9IG5leHRJbmRleDtcclxuICAgIH1cclxuICB9XHJcbiAgaGFzUHJldigpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLl9zbGlkZXMubGVuZ3RoID4gMSAmJiAgISghdGhpcy5fd3JhcCAmJiB0aGlzLl9hY3RpdmVJbmRleCA9PT0gMCk7XHJcbiAgfVxyXG4gIGhhc05leHQoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5fc2xpZGVzLmxlbmd0aCA+IDEgJiYgISghdGhpcy5fd3JhcCAmJiB0aGlzLl9hY3RpdmVJbmRleCA9PT0gKHRoaXMuX3NsaWRlcy5sZW5ndGggLSAxKSk7XHJcbiAgfVxyXG4gIHRvZ2dsZUF1dG9tYXRpY1NsaWRpbmcoKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5wYXVzZSA9PT0gXCJob3ZlclwiKSB7XHJcbiAgICAgIGlmICh0aGlzLl90aW1lcklkKSB7XHJcbiAgICAgICAgdGhpcy5fc3RvcEN5Y2xpbmcoKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLl9zdGFydEN5Y2xpbmcoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICBwcml2YXRlIF9zdGFydEN5Y2xpbmcoKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5faW50ZXJ2YWwgPj0gMCkge1xyXG4gICAgICB0aGlzLl90aW1lcklkID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMubmV4dCgpO1xyXG4gICAgICB9LCB0aGlzLl9pbnRlcnZhbCA+IDYwMCA/IHRoaXMuX2ludGVydmFsOiA2MDApOyAvLzYwMG1zIGlzIHRoZSB0cmFuc2l0aW9uIGR1cmF0aW9uIGRlZmluZWQgaW4gQlMgY3NzXHJcbiAgICB9XHJcbiAgfVxyXG4gIHByaXZhdGUgX3N0b3BDeWNsaW5nKCk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuX3RpbWVySWQpIHtcclxuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLl90aW1lcklkKTtcclxuICAgIH1cclxuICAgIHRoaXMuX3RpbWVySWQgPSBudWxsO1xyXG4gIH1cclxufVxyXG5cclxuLy8gQ1NTIFRSQU5TSVRJT04gU1VQUE9SVCAoU2hvdXRvdXQ6IGh0dHA6Ly93d3cubW9kZXJuaXpyLmNvbS8pXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5mdW5jdGlvbiBnZXRUcmFuc2l0aW9uRW5kKCk6IHN0cmluZyB7XHJcbiAgICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhbmd1bGFyMi1ib290c3RyYXAnKTtcclxuICAgIHZhciB0cmFuc0VuZEV2ZW50TmFtZXMgPSB7XHJcbiAgICAgICAgV2Via2l0VHJhbnNpdGlvbiA6ICd3ZWJraXRUcmFuc2l0aW9uRW5kJyxcclxuICAgICAgICBNb3pUcmFuc2l0aW9uICAgIDogJ3RyYW5zaXRpb25lbmQnLFxyXG4gICAgICAgIE9UcmFuc2l0aW9uICAgICAgOiAnb1RyYW5zaXRpb25FbmQgb3RyYW5zaXRpb25lbmQnLFxyXG4gICAgICAgIHRyYW5zaXRpb24gICAgICAgOiAndHJhbnNpdGlvbmVuZCdcclxuICAgIH07XHJcbiAgICBmb3IgKHZhciBuYW1lIGluIHRyYW5zRW5kRXZlbnROYW1lcykge1xyXG4gICAgICAgIGlmIChlbC5zdHlsZVtuYW1lXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cmFuc0VuZEV2ZW50TmFtZXNbbmFtZV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9